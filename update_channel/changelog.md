# v19-v22

~因为20、21、22版本均为修复19版本才有的BUG，所以合并更新日志~

### Changelog

1.添加一处判定，当数据写入失败时修改文件权限为0644后重新尝试写入数据

2.安装失败时删除modules_update目录下的模块文件夹，已解决即使安装失败，重启手机后也会在Magisk中显示模块的BUG

**注意：安装时提示缺少必要文件的手机请勿尝试强制运行程序，程序内也判断了必要文件是否存在，如不存在将强制停止运行，也就是说，缺少必要文件是肯定无法运行程序的**

# v18

### Changelog

1.**合并两个版本**，v18版本及以后，将两个版本合为一体，刷入模块时使用音量键选择。安装后，可通过创建或删除`/data/adb/accurate_battery/no_trickle`文件来更改是否将涓流充电过程加入电量统计，创建为不加入，删除为加入，更改实时生效，无需重启手机。亦可通过重刷模块来更改选择，也无需重启手机

2.添加Magisk内部的更新通道，使用Cloudflare做代理，国内劣质网络环境也能正常检测、下载更新，只不过延迟较高

3.重写安装脚本，以适配使用Magisk自带的util_functions.sh脚本进行安装（要求Magisk版本大于20.4）
